<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale = 1.0, maximum-scale = 1.0, user-scalable=no">
    <style type="text/css">
    body {
        margin: 0;
    }

    #video-demo-container {
        max-width: 1140px;
        display: flex;
        align-items: center;
        margin: 40px auto;
    }

    .img-grid {
        flex: 0 0 16%;
        max-width: 16%;
        margin: 0 auto;
    }

    .canvas {
        display: none;
        margin: 20px auto 0;
    }

    img {
        width: 100%;
    }
    </style>
</head>

<body>
    <div id="video-demo-container">
        <div class="img-grid">
            <img class="custom-image" src="images/image1.png" alt="image1">
            <a class="get-thumbnail" href="#">Get Thumbnail</a>
        </div>
        <div class="img-grid">
            <img class="custom-image" src="images/image2.png" alt="image1">
            <a class="get-thumbnail" href="#">Get Thumbnail</a>
        </div>
        <div class="img-grid">
            <img class="custom-image" src="images/image3.png" alt="image1">
            <a class="get-thumbnail" href="#">Get Thumbnail</a>
        </div>
        <div class="img-grid">
            <img class="custom-image" src="images/image4.png" alt="image1">
            <a class="get-thumbnail" href="#">Get Thumbnail</a>
        </div>
        <div class="img-grid">
            <img class="custom-image" src="images/image5.png" alt="image1">
            <a class="get-thumbnail" href="#">Get Thumbnail</a>
        </div>
    </div>
    <canvas class="canvas"></canvas>
    <script src="js/jquery.js"></script>
    <script>
    $(document).ready(function() {
        var canvas = $(".canvas")[0];
        y = 0;
        var totalImages = $(".custom-image").length;

    $(".custom-image").each(function(){
        var img = new Array(totalImages);
        for(var i = 0; i < totalImages; i++){ 
            img[i] = $(".custom-image")[y];
            // console.log(y);
             _CTX = canvas.getContext("2d");
            canvas.width = 640;
            canvas.height = 360;
            _CTX.drawImage(img[y], 0, 0);

            const playImage = new Image();
            playImage.crossOrigin = "Anonymous";
            playImage.src = 'images/play-icon.png';

             playImage.onload = () => {
                const startX = (640 / 2) - (playImage.width / 2);
                const startY = (360 / 2) - (playImage.height / 2);
                _CTX.drawImage(playImage, startX, startY, playImage.width, playImage.height);
            };
                var url = canvas.toDataURL();
                $(img[y]).siblings(".get-thumbnail").addClass("aavhyo");
                $(img[y]).siblings(".get-thumbnail").attr('href', url);
            y++;    
         }
    });


        $(".get-thumbnail").on("click", function() {
            // debugger;
            // var _this = $(this);
            // var image = _this.parents(".img-grid").find(".custom-image")[0];
            // console.log(image);
            // _CTX = canvas.getContext("2d");
            // canvas.width = 640;
            // canvas.height = 360;
            // _CTX.drawImage(image, 0, 0);

            // const playImage = new Image();
            // playImage.crossOrigin = "Anonymous";
            // playImage.src = 'images/play-icon.png';

            //  playImage.addEventListener("load", () => {
            //     const startX = (640 / 2) - (playImage.width / 2);
            //     const startY = (360 / 2) - (playImage.height / 2);
            //     _CTX.drawImage(playImage, startX, startY, playImage.width, playImage.height);
            // });
                // console.log(url);
                // var url = canvas.toDataURL();
                // $(this).attr('href', url);
                $(".canvas").css("display","block");
                $(this).attr('download', 'thumbnail.png');
                // return false;
        });
    });

    </script>
</body>

</html>